<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SOQCS: Programming with SOQCS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SOQCS
   &#160;<span id="projectnumber">RV1.0 (Beta)</span>
   </div>
   <div id="projectbrief">Stochastic Optical Quantum Circuit Simulator</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('coding.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Programming with SOQCS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="guidelines"></a>
Guidelines to program with SOQCS</h1>
<p>The basic steps to program in SOQCS are shown next. An example of a simple SOQCS simulation using these steps can be found in <a class="el" href="live1_8cpp.html">live1.cpp</a> . Check the examples section of this documentation for this and more examples. <br />
</p>
<ul>
<li><b>Configure SOQCS</b>.<br />
 Set the maximum number of photons to be used in the simulation and create the circuit. <div class="fragment"><div class="line"><a class="code" href="util_8cpp.html#ab270dc9e2a3a83187f52c22be3136427">cfg_soqcs</a>(2);</div><div class="line"><span class="keyword">auto</span> circuit = <span class="keyword">new</span> <a class="code" href="classqocircuit.html">qocircuit</a>(2);</div></div><!-- fragment --> <br />
</li>
<li><b>Create a set of photons and send them to the circuit</b>.<br />
 <div class="fragment"><div class="line"><span class="keyword">auto</span> photons= <span class="keyword">new</span> <a class="code" href="classph__bunch.html">ph_bunch</a>(circuit-&gt;num_levels());</div><div class="line">photons-&gt;<a class="code" href="group___p_bunch__manipulation.html#gab0695d1c141c722931a030e4a83cf8c8">add_photons</a>(2, 1, circuit);</div><div class="line">photons-&gt;send2circuit(circuit);</div></div><!-- fragment --> <br />
 <b>Alternatively initialize an input state and configure an emitter</b>.<br />
 The state can be created manually (next) or automatically with a QD model like in <a class="el" href="live4_8cpp.html">live4.cpp</a> Please check the section about states in the manual to know more about the addition of terms to a state. <div class="fragment"><div class="line"><span class="keyword">auto</span> input= <span class="keyword">new</span> <a class="code" href="classstate.html">state</a>(circuit-&gt;num_levels());</div><div class="line">in_term.resize(4,2);</div><div class="line">in_term &lt;&lt; 0, 0, <span class="comment">// Channels</span></div><div class="line">           <a class="code" href="qocircuit_8h.html#a0f4b0111b93bf2933b351bba78cc9f79">H</a>, <a class="code" href="qocircuit_8h.html#ac5dc2e25ee3e4af146d8ccdb65cf43da">V</a>, <span class="comment">// Polarization</span></div><div class="line">           0, 1, <span class="comment">// Packet number</span></div><div class="line">           3, 2; <span class="comment">// Occupation</span></div><div class="line">input-&gt;add_term(1.0,in_term,circuit);</div></div><!-- fragment --> <br />
 Then the packets are defined manually (also like in <a class="el" href="live4_8cpp.html">live4.cpp</a>) and a emitter is created in the circuit. Note that the final packet numbers may change from the user suggestion. <div class="fragment"><div class="line">circuit-&gt;def_packet(0,        0.0, 10000.0, 1.0);</div><div class="line">circuit-&gt;def_packet(1,       16.4, 10000.0, 1.0);</div><div class="line">circuit-&gt;emitter(<span class="charliteral">&#39;G&#39;</span>,0);</div></div><!-- fragment --> <br />
</li>
<li><b>Build the optical circuit</b>.<br />
 It is possible to build an optical circuit from the elements in the catalog. Check the documentation for more information about how to configure them. Every circuit has to end with the detectors. <div class="fragment"><div class="line">example-&gt;beamsplitter(0,1,theta,phi);</div><div class="line">example-&gt;detector(0);</div><div class="line">example-&gt;detector(1);</div></div><!-- fragment --> <br />
</li>
<li><b>Create a simulator and run the simulation</b>.<br />
 The simulator class is the core of this library. It converts a set of input photons into a set of outcomes and their probabilities. <br />
 <div class="fragment"><div class="line"><a class="code" href="classsimulator.html">simulator</a> *sim= <span class="keyword">new</span> <a class="code" href="classsimulator.html">simulator</a>();</div><div class="line"><span class="keyword">auto</span> measured=sim-&gt;<a class="code" href="group___simulation__execution.html#ga0cc6f53e48056281735d2af68a266955">run</a>(photons,example);</div></div><!-- fragment --> <br />
 It is also possible to run a simulation for an input state instead of a set of photons with the same syntax. In this case, the output is an output state. Detector effects may be calculated afterwards using the tools in the library. <div class="fragment"><div class="line"><a class="code" href="classsimulator.html">simulator</a> *sim= <span class="keyword">new</span> <a class="code" href="classsimulator.html">simulator</a>();</div><div class="line"><span class="keyword">auto</span> output=sim-&gt;<a class="code" href="group___simulation__execution.html#ga0cc6f53e48056281735d2af68a266955">run</a>(input,example);</div></div><!-- fragment --> Various cores/backends are available when creating the simulator. <br />
 <br />
</li>
<li><b>Print and analyze the outptup </b>.<br />
 The most straightforward thing to do is to print an look at the output outcomes <div class="fragment"><div class="line">measured-&gt;prnt_bins();</div></div><!-- fragment --> or the output state. <div class="fragment"><div class="line">output-&gt;prnt_state();</div></div><!-- fragment --> There are many ways to configure the notation of this output in the library. We refer the attentive reader to our documentation. <br />
 <br />
</li>
<li><b>Alternative: Use density matrices </b>.<br />
 It is also possible to create and print density matrices with a more complete information about the outputs and to obtain the statistics of mixed states. In <a class="el" href="live4_8cpp.html">live4.cpp</a> can be found an example of the use of density matrices in SOQCS. <br />
</li>
</ul>
<h1><a class="anchor" id="Examples"></a>
Examples of SOQCS programs</h1>
<p>Five examples in C++ can be found in the <em>/SOQCS root folder/examples/</em> subfolder. They can be compiled with the whole library following the instructions above or typing <em>make</em> within the examples folder after compiling the library.</p>
<ul>
<li><a class="el" href="live1_8cpp.html">Live1.cpp</a>: Elementary example program to show a basic simulation in SOQCS. <br />
</li>
<li><a class="el" href="live2_8cpp.html">Live2.cpp</a>: An example of HOM visibility using a beamsplitter and physical detectors. <br />
</li>
<li><a class="el" href="live3_8cpp.html">Live3.cpp</a>: An example of the delay gate. <br />
</li>
<li><a class="el" href="live4_8cpp.html">Live4.cpp</a>: A simulation of the entanglement swapping protocol. Example of use of density matrices in SOQCS. <br />
</li>
<li><a class="el" href="live5_8cpp.html">Live5.cpp</a>: A boson sampling example. <br />
</li>
</ul>
<p>Additionally, there are also versions of those same examples in Python that can be found in the same folder as Jupyter notebooks. The Python port is still in development and it does not contain yet all the functionality of the parent C++ library therefore, currently not all examples in C++ have their Python counterpart.</p>
<h1><a class="anchor" id="catalog"></a>
Circuit elements catalog.</h1>
<p>This section is a brief summary of the catalog of optical circuit elements available in SOQCS. We refer to the documentation of each one of them for details. This list is not exhaustive therefore we also refer the user to the circuit class documentation in the modules section for more information.<br />
</p>
<ul>
<li><b>Basic elements:</b><ul>
<li><b style="color:blue;">beamsplitter</b>(int i_ch1, int i_ch2, double theta, double phi): Adds an ideal beamsplitter to the circuit. <br />
</li>
<li><b style="color:blue;">phase_shifter</b>(int i_ch, double phi): Adds a phase_shifter to the circuit. <br />
</li>
<li><b style="color:blue;">dielectric</b>(int i_ch1, int i_ch2, cmplx t, cmplx r): Adds a physical dielectric beamsplitter. <br />
</li>
<li><b style="color:blue;">loss</b>(int i_ch, double l): Adds a lossy medium. <br />
</li>
<li><b style="color:blue;">MMI2</b>(int i_ch1, int ch2): Adds a 2x2 ideal MMI beamsplitter. <br />
</li>
<li><b style="color:blue;">NSX</b>(int i_ch1, int i_ch2, int i_ch3): Adds a built-in NSX circuit (Post-selection has to be configured with the detectors). <br />
</li>
<li><b style="color:blue;">random_circuit()</b>: Adds a random circuit. <br />
 <br />
</li>
</ul>
</li>
<li><b>Polarization elements:</b><ul>
<li><b style="color:blue;">rotator</b>(int i_ch, double d_theta, double d_phi): Adds a rotator to the circuit. <br />
</li>
<li><b style="color:blue;">polbeamsplitter</b>(int i_ch1, int i_ch2, int P): Adds a polarizing beamsplitter. <br />
</li>
<li><b style="color:blue;">half</b>(int i_ch, int P, double alplha, double gamma): Adds a half-waveplate. <br />
</li>
<li><b style="color:blue;">quarter</b>(int i_ch, int P, double alplha, double gamma): Adds a quarter-waveplate. <br />
 <br />
</li>
</ul>
</li>
<li><b>Detection elements:</b><ul>
<li><b style="color:blue;">detector</b>(int i_ch): Adds a detector. <br />
</li>
<li><b style="color:blue;">detector</b>(int i_ch, int cond): Adds a conditional detection. <br />
</li>
<li><b style="color:blue;">detector</b>(int i_ch, int cond, double eff, double blnk, double gamma): Adds a general physical detector. <br />
</li>
<li><b style="color:blue;">noise</b>(double stdev2): Adds noise to the output. <br />
 <br />
</li>
</ul>
</li>
<li><b>Emitter and distinguishability model:</b> In general is better to create the photons and send them to the circuit. But the emitter can also be configured manually.<ul>
<li><b style="color:blue;">def_packet</b>(int n, double t, double f, double w): Creates a new packet definition. <br />
</li>
<li><b style="color:blue;">emitted_vis</b>(int i,int j): Returns the probability of two wave packets to overlap. <br />
</li>
<li><b style="color:blue;">emitter</b> (char ckind, int rand): Adds an emitter to the circuit using the packet definitions given by def_packet. <br />
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="cores"></a>
Simulator cores/backends</h1>
<p>The simulator can be configured to use four different cores/backends:</p><ul>
<li><b style="color:blue;">Direct method</b>: The calculation is performed similarly on how it is done analytically. This method is recommended when the <b>number of photons &lt;=4</b><br />
</li>
<li><b style="color:blue;">Direct restricted method</b>: Same as the direct method but considering only output kets whose occupations by level are zero or one. The calculation is faster because less possible outputs have to be considered but restricts the circuits that can be simulated.<br />
</li>
<li><b style="color:blue;">Glynn method</b>: The calculation is performed using permanent calculations for each possible output ket. We use the Balasubramanian/Bax/Franklin/Glynn formula implemented in gray code to calculate the permanent. This method is recommended when the <b>number of photons &gt;=4</b><br />
</li>
<li><b style="color:blue;">Glynn restricted method</b>: Same as the Glynn method but considering only the output states with occupations by level of zero or one. This restricts but speeds up the output. <br />
 <br />
 It is also possible to call the simulator in a <b style="color:blue;">"manual mode"</b> where only the amplitudes of a pre-determined list of kets are calculated if this list is provided to the simulator. It is possible to know more about how to configure these backends in the simulator manual page. Additionally SOQCS provide basic support for boson sampling with an implementation of the Clifford A algorithm [1]. <br />
 <br />
 [1] Peter Clifford and Raphael Clifford. <em>The Classical Complexity of Boson Sampling</em>, pages 146 to 155.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___simulation__management.html#ga628613ca772e5c18948f08484e84bb7b">simulator::simulator(const char* i_back,int i_mem)</a> . </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<html lang="en">
<style type="text/css">
<style>
.footer {
    background:white;   
}
.ft-list {
    text-align:left;
    list-style:none;
    overflow:hidden;/*contain floats*/
    margin:0 auto;
    padding:0;
    height:150px;
    background:white;
    border-top-width: 1px;
    border-top-style: solid;
    border-top-color: darkblue;
}
.ft-list li {
    float:right;
    margin:0 15px 0 0;
    background:white;
}
.ft-list li.last {margin:0;}
</style>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<div class="ft-list"
  <ul>
     <li>
            <p style="color:black"> 
            <b>Maynooth Univeristy</b><br>
            <img src="../assets/Maynooth2.png"/>
            </p>
    </li>
    <li>
            <p style="color:black">
            <b>Copyright:</b><br>
            Copyright Â© 2022 National University of Ireland Maynooth, 
            <br> Maynooth University. All rights reserved.<br>
            The contents and use of this document and the related code <br>
            are subject to the licence terms detailed in <a  href="../assets/LICENCE.TXT"> LICENCE.txt </a> 
            </p>
    </li>
    <li>
            <p style="color:black">
            <br>
            Jiri Vala <br>
            <br>
            <b>e-mail:</b><br>
            <a  href="mailto:jiri.vala@mu.ie">jiri.vala@mu.ie</a>
            </p>
    </li>
    <li class="last">
            <p style="color:black">
            <b>Authorship:</b><br>
            Javier Osca Cotarelo<br>
            <br>
            <b>e-mail:</b><br>
            <a  href="mailto:javier.oscacotarelo@mu.ie">javier.oscacotarelo@mu.ie</a>
            </p>
    </li>
  </ul>
</div>
</div>
</html>
