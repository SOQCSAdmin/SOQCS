<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SOQCS: benchlive.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SOQCS
   &#160;<span id="projectnumber">RV 1.5</span>
   </div>
   <div id="projectbrief">Stochastic Optical Quantum Circuit Simulator</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('benchlive_8cpp-example.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">benchlive.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><b>BENCHMARK</b>: Single permanent calculation time in SOQCS<br />
 In this example various random circuits of N photons and 2N channels are generated. The N photons are assigned one by one to be initialized in the first N channels. The amplitude to find out those photons in the same configuration at the output is calculated. The calculation of this amplitude implies the calculation of a single permanent. The time required to calculate this permanent with different methods is registered and plotted as function of the number of photons and channels. The permanent is calculated using the Balasubramanian/Bax/Franklin/Glynn formula "Glynn", the Ryser formula "Ryser" or the Ryser formula making use of parallelization in the way suggested in ref. [1] "Ryser 10". In the last case 10 processor cores are used. <br />
 <br />
 [1] P.H. Lundow, K. Markstrom, <em> Efficient computation of permanents, with applications to Boson sampling and random matrices</em>, <b>Journal of Computational Physics</b>, Volume 455, 2022,110990. <br />
 <br />
 <b>Description</b>:<br />
 This program measures the cost in time to execute SOQCS for an increasing number of channels and photons. <br />
 Results on an Intel <a href="#" onclick="location.href='mai'+'lto:'+'I7-'+'10'+'750'+'H@'+'2.6'+'0G'+'Hz'; return false;">I7-10<span style="display: none;">.nosp@m.</span>750H<span style="display: none;">.nosp@m.</span>@2.60<span style="display: none;">.nosp@m.</span>GHz</a> 16GB Ram:<br />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Photons  </th><th class="markdownTableHeadLeft">Channels  </th><th class="markdownTableHeadLeft">Glynn (ms)  </th><th class="markdownTableHeadLeft">Ryser (ms)  </th><th class="markdownTableHeadLeft">Ryser 10 (ms)   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">10  </td><td class="markdownTableBodyLeft">20  </td><td class="markdownTableBodyLeft">0.23  </td><td class="markdownTableBodyLeft">0.30  </td><td class="markdownTableBodyLeft">0.09   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">11  </td><td class="markdownTableBodyLeft">22  </td><td class="markdownTableBodyLeft">0.23  </td><td class="markdownTableBodyLeft">0.14  </td><td class="markdownTableBodyLeft">0.01   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">12  </td><td class="markdownTableBodyLeft">24  </td><td class="markdownTableBodyLeft">0.44  </td><td class="markdownTableBodyLeft">0.28  </td><td class="markdownTableBodyLeft">0.05   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">13  </td><td class="markdownTableBodyLeft">26  </td><td class="markdownTableBodyLeft">1.07  </td><td class="markdownTableBodyLeft">0.62  </td><td class="markdownTableBodyLeft">0.09   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">14  </td><td class="markdownTableBodyLeft">28  </td><td class="markdownTableBodyLeft">2.06  </td><td class="markdownTableBodyLeft">1.26  </td><td class="markdownTableBodyLeft">0.17   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">15  </td><td class="markdownTableBodyLeft">30  </td><td class="markdownTableBodyLeft">4.29  </td><td class="markdownTableBodyLeft">2.62  </td><td class="markdownTableBodyLeft">0.34   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">16  </td><td class="markdownTableBodyLeft">32  </td><td class="markdownTableBodyLeft">9.24  </td><td class="markdownTableBodyLeft">9.29  </td><td class="markdownTableBodyLeft">0.70   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">17  </td><td class="markdownTableBodyLeft">34  </td><td class="markdownTableBodyLeft">18.44  </td><td class="markdownTableBodyLeft">11.97  </td><td class="markdownTableBodyLeft">1.45   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">18  </td><td class="markdownTableBodyLeft">36  </td><td class="markdownTableBodyLeft">32.28  </td><td class="markdownTableBodyLeft">22.61  </td><td class="markdownTableBodyLeft">3.11   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">19  </td><td class="markdownTableBodyLeft">38  </td><td class="markdownTableBodyLeft">64.16  </td><td class="markdownTableBodyLeft">44.80  </td><td class="markdownTableBodyLeft">6.82   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">20  </td><td class="markdownTableBodyLeft">40  </td><td class="markdownTableBodyLeft">137.84  </td><td class="markdownTableBodyLeft">95.61  </td><td class="markdownTableBodyLeft">14.39   </td></tr>
</table>
<p><br />
 Note that reserving (and initializing) memory for the output state adds a constant overhead to the execution times that may affect the benchmark result.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="soqcs_8h.html">soqcs.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="benchlive_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div><div class="line">{</div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;* SOQCS Benchmark: Full distribution calculation for a random circuit&quot;</span> &lt;&lt; endl;</div><div class="line">    cout &lt;&lt; endl;</div><div class="line"></div><div class="line">    <span class="comment">//Create simulator</span></div><div class="line">    <span class="keyword">auto</span> sim= <span class="keyword">new</span> <a name="_a1"></a><a class="code" href="classsimulator.html">simulator</a>(1);</div><div class="line"></div><div class="line">    <span class="comment">// Print table header</span></div><div class="line">    cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;Photons&quot;</span>;</div><div class="line">    cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;Channels&quot;</span>;</div><div class="line">    cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;Glynn (ms)&quot;</span>;</div><div class="line">    cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;Ryser (ms)&quot;</span>;</div><div class="line">    cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;Ryser 10 (ms)&quot;</span>;</div><div class="line">    cout &lt;&lt; endl;</div><div class="line"></div><div class="line">    <span class="comment">// Main loop</span></div><div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> nph=10;nph&lt;=20;nph++){</div><div class="line">        <span class="keywordtype">int</span> nch=2*nph;</div><div class="line"></div><div class="line">        <span class="comment">//Prepare circuit</span></div><div class="line">        <span class="keyword">auto</span> circuit = <span class="keyword">new</span> <a name="_a2"></a><a class="code" href="classqocircuit.html">qocircuit</a>(nch);</div><div class="line">        circuit-&gt;random_circuit();</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// Create input state and output list with nph photons</span></div><div class="line">        <span class="keyword">auto</span> input=<span class="keyword">new</span> <a name="_a3"></a><a class="code" href="classstate.html">state</a>(nph,circuit-&gt;num_levels());</div><div class="line">        <span class="keyword">auto</span> olist=<span class="keyword">new</span> <a name="_a4"></a><a class="code" href="classket__list.html">ket_list</a>(circuit-&gt;num_levels());</div><div class="line">        <span class="keywordtype">int</span> *occ=<span class="keyword">new</span> <span class="keywordtype">int</span>[circuit-&gt;num_levels()]();</div><div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;nph;i++) occ[i]=1;</div><div class="line">        input-&gt;add_term(1.0,occ);</div><div class="line">        olist-&gt;<a name="a5"></a><a class="code" href="group___ket__operations.html#ga684bc5b49a7771062dc61435bfbcf852">add_ket</a>(occ);</div><div class="line"></div><div class="line">        <span class="comment">// Glynn</span></div><div class="line">        <span class="keyword">auto</span> start1 = chrono::steady_clock::now();</div><div class="line">        sim-&gt;run(input,olist,circuit,2);</div><div class="line">        <span class="keyword">auto</span> end1 = chrono::steady_clock::now();</div><div class="line">        <span class="keyword">auto</span> tGlynn=chrono::duration_cast&lt;chrono::microseconds&gt;(end1 - start1).count()/1000.0;</div><div class="line"></div><div class="line">        <span class="comment">// Ryser</span></div><div class="line">        <span class="keyword">auto</span> start2 = chrono::steady_clock::now();</div><div class="line">        sim-&gt;run(input,olist,circuit,4);</div><div class="line">        <span class="keyword">auto</span> end2 = chrono::steady_clock::now();</div><div class="line">        <span class="keyword">auto</span> tRyser=chrono::duration_cast&lt;chrono::microseconds&gt;(end2 - start2).count()/1000.0;</div><div class="line"></div><div class="line">        <span class="comment">// Ryser 10</span></div><div class="line">        <span class="keyword">auto</span> start3 = chrono::steady_clock::now();</div><div class="line">        sim-&gt;run(input,olist,circuit,4,10);</div><div class="line">        <span class="keyword">auto</span> end3 = chrono::steady_clock::now();</div><div class="line">        <span class="keyword">auto</span> tORyser=chrono::duration_cast&lt;chrono::microseconds&gt;(end3 - start3).count()/1000.0;</div><div class="line"></div><div class="line">        <span class="comment">// Print benchmark result</span></div><div class="line">        std::cout.setf(std::ios::fixed, std::ios::floatfield);</div><div class="line">        cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; nph;</div><div class="line">        cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; nch;</div><div class="line">        cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; setprecision(2)&lt;&lt; tGlynn;</div><div class="line">        cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; setprecision(2)&lt;&lt; tRyser;</div><div class="line">        cout &lt;&lt; left   &lt;&lt; setw(14) &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; setprecision(2)&lt;&lt; tORyser;</div><div class="line">        cout &lt;&lt; endl;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//*********************************************************************************************************</span></div><div class="line"><span class="comment">// Copyright © 2023 National University of Ireland Maynooth, Maynooth University. All rights reserved.    *</span></div><div class="line"><span class="comment">// The contents of this file are subject to the licence terms detailed in LICENCE.TXT available in the    *</span></div><div class="line"><span class="comment">// root directory of this source tree. Use of the source code in this file is only permitted under the    *</span></div><div class="line"><span class="comment">// terms of the licence in LICENCE.TXT.                                                                   *</span></div><div class="line"><span class="comment">//*********************************************************************************************************</span></div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<html lang="en">
<style type="text/css">
<style>
.footer {
    background:white;   
}
.ft-list {
    text-align:left;
    list-style:none;
    overflow:hidden;/*contain floats*/
    margin:0 auto;
    padding:0;
    height:150px;
    background:white;
    border-top-width: 1px;
    border-top-style: solid;
    border-top-color: darkblue;
}
.ft-list li {
    float:right;
    margin:0 15px 0 0;
    background:white;
}
.ft-list li.last {margin:0;}
</style>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<div class="ft-list"
  <ul>
     <li>
            <p style="color:black"> 
            <b>Maynooth Univeristy</b><br>
            <img src="../assets/Maynooth2.png"/>
            </p>
    </li>
    <li>
            <p style="color:black">
            <b>Copyright:</b><br>
            Copyright Â© 2023 National University of Ireland Maynooth, 
            <br> Maynooth University. All rights reserved.<br>
            The contents and use of this document and the related code <br>
            are subject to the licence terms detailed in <a  href="../assets/LICENCE.TXT"> LICENCE.txt </a> 
            </p>
    </li>
    <li>
            <p style="color:black">
            <br>
            Jiri Vala <br>
            <br>
            <b>e-mail:</b><br>
            <a  href="mailto:jiri.vala@mu.ie">jiri.vala@mu.ie</a>
            </p>
    </li>
    <li class="last">
            <p style="color:black">
            <b>Authorship:</b><br>
            Javier Osca Cotarelo<br>
            <br>
            <b>e-mail:</b><br>
            <a  href="mailto:soqcslib@gmail.com">soqcslib@gmail.com</a>
            </p>
    </li>
  </ul>
</div>
</div>
</html>
